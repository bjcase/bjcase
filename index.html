<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>bj case ‚Äî home</title>

<!-- Favicons (versioned to bust cache) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=1.20.1">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=1.20.1">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=1.20.1">
<link rel="manifest" href="/site.webmanifest?v=1.20.1">
<link rel="shortcut icon" href="/favicon.ico?v=1.20.1">
<meta name="theme-color" content="#ff9ef6">

<!-- Anti-cache hints -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Atma:wght@400&display=swap" rel="stylesheet" />

<style>
/* ===========================================================
   üåà  BJ CASE 2003 WEBZONE ‚Äî SINGLE FILE INDEX (v1.20.1)
   - Hearts are clickable anchors (#heartL/#heartR), closer to logo
   - Status labels bold + pink
   - Poll gets animated sparkly border + new description (no emojis)
   - Webcam REC + timestamp darker pink for contrast
   =========================================================== */

/* ---------- PALETTE ---------- */
:root{
  --pink:#ff9ef6;
  --pink-dark:#d24fbf;
  --neon-blue:#49c9ff;
  --orange:#ffb35e;
  --red:#ff4d4d;
  --ink:#ffeaff;
  --link:#ffbffb;
  --deep:#21002a;
}

/* ---------- BASE ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font-family:Arial,Helvetica,sans-serif;
  background:#000 url('https://sadhost.neocities.org/images/tiles/pinkstars.gif') repeat fixed;
  cursor:url('https://cur.cursors-4u.net/cursors/cur-2/cur116.cur'), auto;
}
.wrapper{max-width:860px;margin:0 auto;padding:16px}
a{color:var(--link)} a:hover{color:#fff; text-decoration:underline}
.pink{color:var(--pink); font-weight:700}

/* Optional CRT lines overlay (toggle Shift+C) */
.crt::before{
  content:""; pointer-events:none; position:fixed; inset:0;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,.04) 0 1px, transparent 1px 3px);
  mix-blend-mode:overlay; opacity:.4; z-index:9999; display:none;
}
.crt.crt-on::before{ display:block }

/* ---------- HEADER (tight) ---------- */
.site-header{
  border:2px solid var(--pink);
  background:linear-gradient(180deg,#520061 0%,#36003e 60%,#240024 100%);
  box-shadow:0 0 0 2px #000 inset,0 12px 26px #000c;
  margin:16px 0 18px;
  padding:12px 18px 10px; /* tighter */
  position:relative; overflow:hidden;
}

/* Keep notes behind hearts/logo */
.site-header{ position:relative }
.note{ position:absolute; z-index:0; }

/* Centered logo + hearts wrapper so hearts stay aligned and clickable */
.logo-wrap{
  position:relative; display:flex; align-items:center; justify-content:center;
  gap:1.1em; /* base gap; hearts also have slight offsets */
  width:100%; margin:0 auto 6px;
  z-index:2; /* above notes */
}
.heart{
  display:inline-block; text-decoration:none; line-height:1;
  color:#fff; font-size:clamp(22px,4.2vw,38px);
  transform:scaleX(1.3); /* wider heart look */
  text-shadow:0 0 4px var(--pink), 0 0 8px var(--neon-blue);
  filter:contrast(1.15) saturate(1.1) drop-shadow(0 0 2px #fff6);
  transition: transform .12s ease, text-shadow .2s ease;
}
.heart:hover{ transform:scaleX(1.3) scale(1.06); text-shadow:0 0 6px var(--neon-blue), 0 0 10px var(--pink) }

/* Slightly closer spacing than last version, not colliding with notes */
.heart.left{ margin-right:.15em }
.heart.right{ margin-left:.15em }

/* Logo with text-only shine */
.logo{
  position:relative; z-index:2;
  font-family:"Orbitron","Arial Black",sans-serif;
  font-size:clamp(32px,7vw,86px);
  text-transform:lowercase;
  text-align:center;
  background-image:
    linear-gradient(120deg, transparent 45%, rgba(255,255,255,.98) 50%, transparent 55%),
    linear-gradient(90deg, var(--neon-blue), var(--orange), var(--red), var(--pink), var(--neon-blue));
  background-size: 220% 100%, 400% 400%;
  background-position: -180% 0, 0 50%;
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; color:transparent;
  animation: logoShine 3.05s linear infinite;
  text-shadow:0 0 6px var(--neon-blue),0 0 10px var(--pink);
  margin: 0; width:max-content;
}
@keyframes logoShine{0%{background-position:-180% 0,0 50%}100%{background-position:180% 0,0 50%}}

/* Music notes in header only (none behind/over logo/heart area) */
.note{
  user-select:none; pointer-events:none;
  color:#ffd1fa; text-shadow:0 0 6px var(--pink), 0 0 10px #fff8;
  opacity:.96; animation: floatY var(--dur,4.6s) ease-in-out infinite;
}
@keyframes floatY{0%,100%{transform:translateY(0)}50%{transform:translateY(var(--amp,7px))}}

/* ---------- NAV ---------- */
.nav{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:10px 0 8px}
.nav a{
  --glow: rgba(73,201,255,.65);
  text-decoration:none; color:#fff; font-weight:700; letter-spacing:.02em;
  padding:10px 16px; border-radius:6px; position:relative; overflow:hidden;
  border:2px solid var(--pink);
  background:
    linear-gradient(180deg, #4a005f 0%, #2a003d 55%, #1a0026 100%),
    radial-gradient(120% 100% at 50% 0%, rgba(255,255,255,.25), transparent 60%);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.25),
    inset 0 -6px 12px rgba(0,0,0,.45),
    0 0 0 2px #000 inset;
  transition:transform .15s ease, box-shadow .2s ease, border-color .2s ease, color .2s ease;
}
.nav a::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(120deg, transparent 45%, rgba(255,255,255,.5) 50%, transparent 55%);
  transform:translateX(-130%); transition:transform .5s ease;
}
.nav a:hover{
  border-color:var(--neon-blue); color:var(--neon-blue);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.35),
    inset 0 -6px 14px rgba(0,0,0,.5),
    0 0 12px var(--glow);
  transform:translateY(-1px);
}
.nav a:hover::after{ transform:translateX(130%) }

/* ---------- TICKER ---------- */
.ticker{
  overflow:hidden; white-space:nowrap; border:2px solid var(--pink);
  background:linear-gradient(180deg,#330033,#240024);
  font:800 13px/2.1 Verdana,Tahoma,Arial,sans-serif; color:#ffdfff; text-transform:uppercase; letter-spacing:.08em;
}
.ticker span{display:inline-block; padding-left:100%; animation:slide 18s linear infinite}
@keyframes slide{to{transform:translateX(-100%)}}

/* ---------- GRID ---------- */
.grid{display:grid; gap:14px; grid-template-columns:2fr 1fr; align-items:start;}
.grid.single{ grid-template-columns:1fr; }
#leftPane{ min-height: 640px; }
.grid.single #leftPane{ min-height: 780px; }

/* ---------- PANELS ---------- */
.panel{
  border:2px solid var(--pink);
  background:linear-gradient(180deg,#3d0055 0%,#21002a 60%,#1a001a 100%);
  box-shadow:0 0 0 2px #000 inset, 0 12px 22px #0007;
  padding:16px; border-radius:3px; position:relative; overflow:hidden;
}
.panel h2{
  margin:0 0 12px;
  font-family:"Atma", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:400; font-size:20px; line-height:1.2;
  text-transform:uppercase; letter-spacing:.08em; color:var(--neon-blue);
}
.panel + .panel{ margin-top:14px }
hr{border:none; height:1px; background:linear-gradient(90deg,transparent,var(--neon-blue),transparent); margin:12px 0}

/* ---------- WINAMP (Now Playing) ---------- */
.winamp{
  border:1px solid #ff7ef6; background:#1b001d;
  box-shadow:0 0 0 2px #000 inset, 0 0 0 3px #2a0030 inset;
  padding:10px; border-radius:4px; color:#ffe5ff;
  font:12px "Tahoma",Verdana,Arial,sans-serif;
}
.winamp .display{
  border:1px solid #ff7ef6; box-shadow:0 0 0 2px #000 inset;
  background:#120016; padding:6px 8px; margin-bottom:8px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.winamp .row{display:flex; align-items:center; gap:8px; margin-top:6px}
.btn{
  display:inline-block; width:22px; height:22px; border:1px solid #ff7ef6; background:#350036;
  box-shadow:0 0 0 2px #000 inset; text-align:center; line-height:20px; font-weight:800; user-select:none; position:relative; overflow:hidden; cursor:pointer;
}
.btn::after{content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent, rgba(255,255,255,.35), transparent); transform:translateX(-120%); opacity:0}
.btn:hover::after{ animation: shine .9s ease; opacity:1 }
@keyframes shine{ from{ left:-70px } to{ left:120% } }
.scrubber{
  flex:1; height:8px; border:1px solid #ff7ef6; box-shadow:0 0 0 2px #000 inset;
  background: linear-gradient(90deg,#ff9ef6 0%, #49c9ff 45%, #ffb35e 85%);
  margin-left:8px; border-radius:2px;
}

/* ---------- BADGES ---------- */
.badges{display:flex; flex-wrap:wrap; gap:6px}
.badges a{display:inline-block; padding:6px 10px; border:1px solid var(--pink); box-shadow:0 0 0 2px #000 inset; background:#300033; color:#ffbdfb; font:800 10px/1 Verdana; text-align:center; text-decoration:none}

/* ---------- POLL (sparkly border) ---------- */
.pollbox{
  position:relative;
  border:2px solid transparent;
  background:linear-gradient(180deg,#2a0034 0%,#1a0024 100%);
  box-shadow:0 0 0 2px #000 inset, 0 10px 18px #0007;
  padding:12px; border-radius:6px;
}
.pollbox::before{
  content:""; position:absolute; inset:-2px; border-radius:8px;
  background:
    conic-gradient(from 0deg, #fff 0 5%, transparent 8% 15%, #ffd1fa 18% 20%, transparent 23% 40%, #ff9ef6 43% 45%, transparent 48% 60%, #fff 62% 64%, transparent 66% 100%),
    linear-gradient(180deg, transparent, transparent);
  -webkit-mask: 
    linear-gradient(#000 0 0) content-box, 
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding:2px;
  animation: spin 6s linear infinite;
  pointer-events:none;
}
@keyframes spin{ to{ transform: rotate(1turn) } }

.pollbox p.desc{
  margin:0 0 10px; font:12px Verdana,Tahoma,Arial,sans-serif; color:#ffdfff; opacity:.95;
}
.poll label{display:block; margin:6px 0; font:12px Verdana,Tahoma,Arial,sans-serif}
.voteBtn{
  margin-top:10px; padding:9px 14px; font-weight:800; letter-spacing:.02em;
  border:2px solid var(--pink); border-radius:6px; cursor:pointer; color:#fff;
  background:
     linear-gradient(180deg,#6c006c 0%, #420042 100%),
     radial-gradient(80% 60% at 50% 0%, rgba(255,255,255,.28), transparent 60%);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25), inset 0 -6px 12px rgba(0,0,0,.45), 0 0 0 2px #000 inset, 0 0 14px rgba(73,201,255,.35);
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
.voteBtn:hover{ transform:translateY(-1px); border-color:var(--neon-blue); box-shadow:inset 0 1px 0 rgba(255,255,255,.35), inset 0 -6px 12px rgba(0,0,0,.45), 0 0 0 2px #000 inset, 0 0 18px rgba(73,201,255,.55) }
.poll-results{ margin-top:10px; font:12px Verdana,Tahoma,Arial,sans-serif }
.bar{height:12px;background:#ff79e9;border:1px solid var(--pink);box-shadow:0 0 0 2px #000 inset}

/* ---------- FAKE WEBCAM ---------- */
.webcam{
  border:2px solid #ff7ef6; background:#0d0010;
  box-shadow:0 0 0 2px #000 inset, 0 0 0 3px #2a0030 inset;
  padding:10px; border-radius:4px; position:relative; margin-top:12px;
}
.webcam .bar{
  display:flex; justify-content:space-between; align-items:center;
  font:10px Tahoma,Verdana,Arial,sans-serif; color:#ffdfff; opacity:.9; margin-bottom:8px;
}
.webcam .rec{ display:inline-flex; gap:6px; align-items:center; letter-spacing:.08em; text-transform:uppercase; color:var(--pink-dark) }
.webcam .dot{ width:8px; height:8px; background:#ff4d4d; border-radius:50%; box-shadow:0 0 6px #ff4d4d; animation:blink 1s steps(2,end) infinite; }
@keyframes blink{50%{opacity:.2}}
.webcam .ts{ opacity:.9; color:var(--pink-dark) }
.webcam .screen{
  width:100%; aspect-ratio:4/3; background:#120016;
  border:1px solid #ff7ef6; box-shadow:0 0 0 2px #000 inset;
  overflow:hidden; position:relative;
}
.webcam .screen img{ width:100%; height:100%; object-fit:cover; display:block; filter:contrast(1.05) saturate(1.1) brightness(.95); }

/* ---------- SHOUTBOX ---------- */
.shoutbox{ margin-top:14px }
.chat{
  display:flex; flex-direction:column; gap:8px;
  max-height: 460px; min-height: 260px;
  overflow:auto;
  background:#1a001e; border:1px solid #ff7ef6; box-shadow:0 0 0 2px #000 inset; padding:10px; border-radius:4px;
}
.bubble{
  max-width:92%; padding:8px 10px; border-radius:10px; font:12px Verdana,Tahoma,Arial,sans-serif; line-height:1.3;
  background:linear-gradient(180deg,#420046,#2a0030); border:1px solid #ff7ef6; box-shadow:0 0 0 2px #000 inset;
}
.bubble.me{ align-self:flex-end; background:linear-gradient(180deg,#004a66,#002436); border-color:#49c9ff }
.meta{ font-size:10px; opacity:.7; margin-top:3px }
.inputRow{ display:flex; gap:6px; margin-top:10px }
.inputRow input,.inputRow textarea{
  flex:1; background:#26002c; color:#ffeaff; border:1px solid #ff7ef6; border-radius:4px; padding:8px; font:12px Verdana,Tahoma,Arial,sans-serif;
  box-shadow:0 0 0 2px #000 inset;
}
.inputRow button{
  background:linear-gradient(180deg,#6c006c,#420042); color:#fff; border:2px solid var(--pink); border-radius:4px; padding:8px 12px; font-weight:700; cursor:pointer;
  box-shadow:0 0 0 3px #000 inset;
}
.emotes{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px }
.emotes button{
  font:12px Verdana,Tahoma,Arial,sans-serif; padding:4px 8px; border:1px solid var(--pink); background:#300033; color:#ffdfff; border-radius:3px; cursor:pointer;
}

/* ---------- FOOTER ---------- */
footer{margin:18px 0 32px; text-align:center; color:#ffdfff; font:12px Verdana,Tahoma,Arial,sans-serif}

/* ---------- CURSOR GLITTER ---------- */
.cursor-star{
  position:absolute; width:7px; height:7px; pointer-events:none;
  background:radial-gradient(circle,#fff 0%,transparent 70%);
  opacity:.95; filter:drop-shadow(0 0 4px currentColor);
  animation:starFade .5s linear forwards;
}
@keyframes starFade{from{transform:scale(1);opacity:.95}to{transform:scale(0);opacity:0}}

/* ---------- RESPONSIVE ---------- */
@media(max-width:520px){
  .nav a{font-size:14px; padding:8px 12px}
  .logo{font-size:clamp(28px,9vw,72px)}
}
</style>
</head>
<body>
<div class="wrapper">

  <!-- ========== HEADER ========== -->
  <header class="site-header" id="header">
    <!-- Left notes cluster -->
    <span class="note" style="left:10px; top:4px;  font-size:16px; --dur:4.8s; --amp:8px;">‚ô™</span>
    <span class="note" style="left:34px; top:22px; font-size:21px; --dur:4.2s; --amp:6px;">‚ô´</span>
    <span class="note" style="left:18px; top:46px; font-size:14px; --dur:5.1s; --amp:7px;">‚ô™</span>
    <span class="note" style="left:64px; top:70px; font-size:18px; --dur:4.5s; --amp:6px;">‚ô´</span>
    <span class="note" style="left:22px; top:94px; font-size:16px; --dur:4.9s; --amp:6px;">‚ô™</span>
    <span class="note" style="left:74px; top:114px;font-size:18px; --dur:4.4s; --amp:6px;">‚ô´</span>
    <!-- Fill gap -->
    <span class="note" style="left:96px; top:10px;font-size:16px; --dur:4.7s; --amp:6px;">‚ô™</span>
    <span class="note" style="left:112px; top:36px;font-size:18px; --dur:4.6s; --amp:7px;">‚ô´</span>

    <!-- Right notes cluster -->
    <span class="note" style="right:12px; top:6px;  font-size:20px; --dur:4.6s; --amp:8px;">‚ô´</span>
    <span class="note" style="right:42px; top:24px;  font-size:14px; --dur:4.0s; --amp:6px;">‚ô™</span>
    <span class="note" style="right:20px; top:48px;  font-size:23px; --dur:5.0s; --amp:7px;">‚ô´</span>
    <span class="note" style="right:76px; top:72px;  font-size:16px; --dur:4.3s; --amp:6px;">‚ô™</span>
    <span class="note" style="right:26px; top:96px;  font-size:16px; --dur:4.9s; --amp:6px;">‚ô™</span>
    <span class="note" style="right:80px; top:116px; font-size:18px; --dur:4.4s; --amp:6px;">‚ô´</span>
    <!-- Fill gap -->
    <span class="note" style="right:104px; top:14px;font-size:16px; --dur:4.7s; --amp:6px;">‚ô™</span>
    <span class="note" style="right:124px; top:40px;font-size:18px; --dur:4.6s; --amp:7px;">‚ô´</span>

    <!-- Logo + Clickable Hearts -->
    <div class="logo-wrap">
      <a class="heart left"  href="#heartL" title="secret left">‚ô•</a>
      <div class="logo" id="logo">bj case</div>
      <a class="heart right" href="#heartR" title="secret right">‚ô•</a>
    </div>

    <nav class="nav" aria-label="Main">
      <a href="#home">Home</a>
      <a href="#music">Music</a>
      <a href="#visuals">Visuals</a>
      <a href="#journal">Journal</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </nav>

    <div class="ticker"><span>‚úß Welcome to the official BJ Case webzone ‚Ä¢ New music coming soon ‚Ä¢ Chasing dreams since 2003 ‚úß</span></div>
  </header>

  <!-- ========== MAIN GRID (left + right; right dynamic/hideable) ========== -->
  <main class="grid" id="pageRoot">
    <!-- LEFT -->
    <section class="panel" id="leftPane">
      <h2 id="leftTitle">Welcome</h2>
      <div id="leftContent">
        <p>Hi! My name is BJ. I hope you enjoy my page. This is my own little slice (or perhaps, strand?) of the web. This is my digital diary. My respite from the chaos. Feel free to look around, get lost even. Oh, and btw‚Ä¶ I make music! That‚Äôs on here if you wanna check it out!! Safe travels :p</p>

        <hr />
        <h2>Status</h2>
        <p style="white-space:pre-line">
<span class="pink">Currently:</span> rewatching Charmed and working on music : )  (and HW ugh)
<span class="pink">Now listening to:</span> Britney ‚Äî ‚ÄúPhonography‚Äù (on repeat)
<span class="pink">Mood:</span> excited and nervous :D
        </p>

        <hr />
        <h2>Now Playing</h2>
        <div class="winamp" role="group" aria-label="Now Playing">
          <div class="display" id="nowPlayingTrack">01. bj case ‚Äî Performance (demo)</div>
          <div class="row">
            <div class="btn" title="Prev" aria-label="Previous">
              <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M7 5v14H5V5h2zm2 7 10 7V5L9 12z"/></svg>
            </div>
            <div class="btn" title="Play" aria-label="Play">
              <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M8 5v14l11-7z"/></svg>
            </div>
            <div class="btn" title="Pause" aria-label="Pause">
              <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
            </div>
            <div class="btn" title="Next" aria-label="Next">
              <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M17 5v14h2V5h-2zM7 5l10 7-10 7V5z"/></svg>
            </div>
            <div class="scrubber" title="Scrub (decorative)"></div>
            <div id="nowPlayingTime">02:47</div>
          </div>
        </div>

        <hr />
        <h2>Welcome</h2>
        <p>A little something I‚Äôve learned from my short time on Earth so far is the importance of placing an extreme emphasis on LOVE. ;)</p>

        <hr />
        <h2>Roadmap</h2>
        <ul>
          <li>Automation swells, stop-downs, and vocal throws</li>
          <li>Flip Phone ‚Äî saw/square stack groove polish</li>
          <li>Website ‚Äî secret sticker links &amp; gallery</li>
        </ul>

        <div style="margin-top:12px; font:11px Verdana">
          <span style="padding:2px 6px;border:1px solid var(--pink);background:#300033;box-shadow:0 0 0 2px #000 inset">‚òÖ NEW ‚òÖ</span>
          &nbsp;Online now: <span id="onlineCount">7</span> users
        </div>
      </div>
    </section>

    <!-- RIGHT (dynamic) -->
    <aside class="panel" id="rightPane">
      <h2>Release Timeline</h2>
      <pre style="margin:0 0 10px 0; white-space:pre-wrap; font-family:inherit;">
 ‚Ä¢Spring 2026: ??
 ‚Ä¢Summer 2026: ???
 ‚Ä¢ Autumn 2026: ???? 
      </pre>

      <hr />
      <h2>Studio Log</h2>
      <ul id="rightBlock2" style="margin:0 0 10px 18px; padding:0;">
        <li><strong>Nov 3, 2025:</strong> Poll sparkle border; hearts fixed</li>
        <li><strong>Nov 3, 2025:</strong> Cache-bust failsafes</li>
        <li><strong>Nov 2, 2025:</strong> Webcam moved to bottom; Winamp fixed</li>
      </ul>

      <hr />
      <h2>Poll</h2>
      <div class="pollbox" id="pollArea">
        <p class="desc">Pick the song that most interests you‚Ä¶</p>
        <div class="poll">
          <label><input type="radio" name="poll" value="performance"> ‚ÄúPerformance‚Äù</label>
          <label><input type="radio" name="poll" value="flip"> ‚ÄúFlip Phone‚Äù</label>
          <label><input type="radio" name="poll" value="look"> ‚ÄúLook But Don‚Äôt Touch‚Äù</label>
          <button id="voteBtn" class="voteBtn">Cast Vote</button>
        </div>
        <div class="poll-results" id="pollResults" style="display:none;">
          <div>Performance: <span id="pPerf">0%</span></div>
          <div class="bar" id="bPerf" style="width:0%"></div>
          <div style="height:6px"></div>
          <div>Flip Phone: <span id="pFlip">0%</span></div>
          <div class="bar" id="bFlip" style="width:0%; background:#49c9ff"></div>
          <div style="height:6px"></div>
          <div>Look BDT: <span id="pLook">0%</span></div>
          <div class="bar" id="bLook" style="width:0%; background:#ffb35e"></div>
        </div>
      </div>

      <hr />
      <h2>Quick Links</h2>
      <div class="badges" aria-label="Buttons" id="rightQuick">
        <a href="#journal">Journal</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
        <a href="#music">Music</a>
      </div>

      <!-- Webcam at bottom -->
      <div class="webcam">
        <div class="bar">
          <div class="rec"><span class="dot"></span> REC</div>
          <div class="ts" id="ts">00:00:00</div>
        </div>
        <div class="screen">
          <img id="webcamFeed" src="/assets/webcam.gif?v=1.20.1" alt="webcam feed placeholder">
        </div>
      </div>
    </aside>
  </main>

  <!-- ========== SHOUTBOX (private posts) ========== -->
  <section class="panel shoutbox" aria-label="Shoutbox">
    <h2>Shoutbox</h2>
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:8px;">
      <label style="font:12px Verdana"><input type="checkbox" id="privateToggle"> Private view (show my local posts)</label>
      <button id="clearLocal" style="margin-left:auto; background:#2a0030; color:#ffdfff; border:1px solid var(--pink); padding:6px 10px; border-radius:4px; cursor:pointer;">Clear my local posts</button>
    </div>
    <div class="chat" id="chat">
      <div class="bubble"><strong>anon123:</strong> love the sparkle bg! ^_^ <div class="meta">today</div></div>
      <div class="bubble me"><strong>bjcase:</strong> thank you!! new music soon :3 <div class="meta">today</div></div>
    </div>
    <div class="emotes" id="emotes">
      <button type="button">^_^</button><button type="button">>_<</button><button type="button">;_;</button><button type="button">:3</button><button type="button">x_x</button>
      <button type="button">(>‚Äø<)</button><button type="button">(Ôæâ‚óï‚Äø‚óï)Ôæâ*</button><button type="button">(„Å•ÔΩ°‚óï‚Äø‚Äø‚óïÔΩ°)„Å•</button><button type="button">(~_^)</button><button type="button">‡≤†_‡≤†</button>
    </div>
    <div class="inputRow">
      <input id="nameInput" placeholder="name (optional)" />
      <textarea id="msgInput" rows="2" placeholder="type a message... (saved locally only)"></textarea>
      <button id="sendBtn">Save</button>
    </div>
    <p style="font:11px Verdana; opacity:.75; margin-top:8px;">Posts you add are saved to <em>your device only</em> and are hidden by default. Toggle ‚ÄúPrivate view‚Äù to see them.</p>
  </section>

  <!-- FOOTER -->
  <footer>¬© <span id="y">2025</span> bj case ‚Äî handmade glitter webzone</footer>
</div>

<script>
/* ===== VERSION & CACHE-BUST FAILSAFES ===== */
const SITE_VERSION = '1.20.1';
(function ensureVersionParam(){
  try{
    const u = new URL(location.href);
    if(u.searchParams.get('v') !== SITE_VERSION){
      u.searchParams.set('v', SITE_VERSION);
      history.replaceState(null, '', u.toString());
    }
  }catch(e){}
})();
/* Shift + R = hard bust */
window.addEventListener('keydown', (e)=>{
  if(e.key.toLowerCase()==='r' && e.shiftKey){
    const u = new URL(location.href);
    u.searchParams.set('v', Date.now().toString(36));
    location.href = u.toString();
  }
});
/* Shift + C = CRT overlay toggle */
(function(){
  const root = document.documentElement;
  window.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase()==='c' && e.shiftKey){
      root.classList.toggle('crt-on');
      root.classList.toggle('crt');
    }
  });
})();

/* ===== YEAR ===== */
document.getElementById('y').textContent = new Date().getFullYear();

/* ===== FAKE ONLINE COUNTER ===== */
(function(){
  const el = document.getElementById('onlineCount');
  if(!el) return;
  let base = 7 + Math.floor(Math.random()*3);
  function bump(){
    base += (Math.random()>.6?1:-1);
    if(base<3) base=3;
    if(base>18) base=18;
    el.textContent = base;
  }
  setInterval(bump, 3500);
})();

/* ===== HASH ROUTER + dynamic layout ===== */
const pages = {
  home: {
    leftTitle: "Welcome",
    leftHTML: `
      <p>Hi! My name is BJ. I hope you enjoy my page. This is my own little slice (or perhaps, strand?) of the web. This is my digital diary. My respite from the chaos. Feel free to look around, get lost even. Oh, and btw‚Ä¶ I make music! That‚Äôs on here if you wanna check it out!! Safe travels :p</p>

      <hr />
      <h2>Status</h2>
      <p style="white-space:pre-line">
<span class="pink">Currently:</span> rewatching Charmed and working on music : )  (and HW ugh)
<span class="pink">Now listening to:</span> Britney ‚Äî ‚ÄúPhonography‚Äù (on repeat)
<span class="pink">Mood:</span> excited and nervous :D
      </p>

      <hr />
      <h2>Now Playing</h2>
      <div class="winamp" role="group" aria-label="Now Playing">
        <div class="display">01. bj case ‚Äî Performance (demo)</div>
        <div class="row">
          <div class="btn" title="Prev" aria-label="Previous">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M7 5v14H5V5h2zm2 7 10 7V5L9 12z"/></svg>
          </div>
          <div class="btn" title="Play" aria-label="Play">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M8 5v14l11-7z"/></svg>
          </div>
          <div class="btn" title="Pause" aria-label="Pause">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
          </div>
          <div class="btn" title="Next" aria-label="Next">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M17 5v14h2V5h-2zM7 5l10 7-10 7V5z"/></svg>
          </div>
          <div class="scrubber"></div>
          <div>02:47</div>
        </div>
      </div>

      <hr />
      <h2>Welcome</h2>
      <p>A little something I‚Äôve learned from my short time on Earth so far is the importance of placing an extreme emphasis on LOVE. ;)</p>

      <hr />
      <h2>Roadmap</h2>
      <ul>
        <li>Automation swells, stop-downs, and vocal throws</li>
        <li>Flip Phone ‚Äî saw/square stack groove polish</li>
        <li>Website ‚Äî secret sticker links &amp; gallery</li>
      </ul>
    `,
    rightEnabled: true,
    rightHTML: `
      <h2>Release Timeline</h2>
      <pre style="margin:0 0 10px 0; white-space:pre-wrap; font-family:inherit;">
 ‚Ä¢Spring 2026: ??
 ‚Ä¢Summer 2026: ???
 ‚Ä¢ Autumn 2026: ???? 
      </pre>
      <hr />
      <h2>Studio Log</h2>
      <ul style="margin:0 0 10px 18px; padding:0;">
        <li><strong>Nov 3, 2025:</strong> Poll sparkle border; hearts fixed</li>
        <li><strong>Nov 3, 2025:</strong> Cache-bust failsafes</li>
        <li><strong>Nov 2, 2025:</strong> Webcam moved to bottom; Winamp fixed</li>
      </ul>
      <hr />
      <h2>Poll</h2>
      <div class="pollbox">
        <p class="desc">Pick the song that most interests you‚Ä¶</p>
        <div class="poll">
          <label><input type="radio" name="poll" value="performance"> ‚ÄúPerformance‚Äù</label>
          <label><input type="radio" name="poll" value="flip"> ‚ÄúFlip Phone‚Äù</label>
          <label><input type="radio" name="poll" value="look"> ‚ÄúLook But Don‚Äôt Touch‚Äù</label>
          <button id="voteBtnHome" class="voteBtn">Cast Vote</button>
        </div>
        <div class="poll-results" id="pollResultsHome" style="display:none;">
          <div>Performance: <span id="pPerfHome">0%</span></div>
          <div class="bar" id="bPerfHome" style="width:0%"></div>
          <div style="height:6px"></div>
          <div>Flip Phone: <span id="pFlipHome">0%</span></div>
          <div class="bar" id="bFlipHome" style="width:0%; background:#49c9ff"></div>
          <div style="height:6px"></div>
          <div>Look BDT: <span id="pLookHome">0%</span></div>
          <div class="bar" id="bLookHome" style="width:0%; background:#ffb35e"></div>
        </div>
      </div>
      <hr />
      <h2>Quick Links</h2>
      <div class="badges">
        <a href="#journal">Journal</a><a href="#about">About</a><a href="#contact">Contact</a><a href="#music">Music</a>
      </div>
      <div class="webcam">
        <div class="bar"><div class="rec"><span class="dot"></span> REC</div><div class="ts" id="ts2">00:00:00</div></div>
        <div class="screen"><img src="/assets/webcam.gif?v=1.20.1" alt="webcam feed placeholder"></div>
      </div>
    `
  },

  /* ===== Secret heart routes ===== */
  heartL: {
    leftTitle: "‚ô• secret ‚Äî pong",
    leftHTML: `
      <p>Welcome to the secret arcade. Use <strong>‚Üë/‚Üì</strong> to move. First to 5 wins!</p>
      <canvas id="pong" width="560" height="360" style="display:block;width:100%;max-width:560px;border:2px solid var(--pink);background:linear-gradient(180deg,#140018,#0b0010)"></canvas>
      <div style="margin-top:8px;font:12px Verdana">Press <strong>R</strong> to reset ‚Ä¢ Press <strong>P</strong> to pause</div>
    `,
    rightEnabled: false
  },
  heartR: {
    leftTitle: "‚ô• secret ‚Äî note",
    leftHTML: `
      <p>Hidden page reserved for future secrets. Check back later‚Ä¶</p>
      <article>
        <h3>Private Teaser</h3>
        <p>Maybe an early lyric, a cover mock, or a studio camera? Shh.</p>
      </article>
    `,
    rightEnabled: false
  },

  /* ===== Normal routes ===== */
  music: {
    leftTitle: "Music",
    leftHTML: `
      <p>Singles, demos, and deep cuts. Glossy synths, rubbery bass, and late-2000s tension.</p>
      <ul>
        <li><strong>Performance</strong> ‚Äî demo snippet</li>
        <li><strong>Flip Phone</strong> ‚Äî bratty, digital, groovy</li>
        <li><strong>Look But Don‚Äôt Touch</strong> ‚Äî raunchy, glossy attitude</li>
      </ul>
      <hr />
      <h2>Status</h2>
      <p><strong>Mixing:</strong> lift 100‚Äì200 Hz warmth; tighten clap stacks.<br><strong>Next:</strong> vocal doubles + delay throws.</p>
      <hr />
      <h2>Player</h2>
      <div class="winamp" role="group" aria-label="Player">
        <div class="display">02. bj case ‚Äî Flip Phone (WIP)</div>
        <div class="row">
          <div class="btn" title="Prev" aria-label="Previous">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M7 5v14H5V5h2zm2 7 10 7V5L9 12z"/></svg>
          </div>
          <div class="btn" title="Play" aria-label="Play">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M8 5v14l11-7z"/></svg>
          </div>
          <div class="btn" title="Pause" aria-label="Pause">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
          </div>
          <div class="btn" title="Next" aria-label="Next">
            <svg viewBox="0 0 24 24" fill="currentColor" width="14" height="14"><path d="M17 5v14h2V5h-2zM7 5l10 7-10 7V5z"/></svg>
          </div>
          <div class="scrubber"></div><div>03:11</div>
        </div>
      </div>
    `,
    rightEnabled: true,
    rightHTML: `
      <h2>Mix Notes</h2>
      <ul style="margin:0 0 10px 18px; padding:0;">
        <li>Sidechain longer 4/4 bass vs syncopated stabs</li>
        <li>Delay throw on ‚Äú-ance‚Äù tail in ‚ÄúPerformance‚Äù</li>
        <li>Mono core; stereo for color only</li>
      </ul>
      <hr />
      <h2>Quick Actions</h2>
      <div class="badges">
        <a href="#journal">Studio Diary</a>
        <a href="#visuals">Cover Art</a>
        <a href="#contact">Bookings</a>
      </div>
      <div class="webcam">
        <div class="bar"><div class="rec"><span class="dot"></span> REC</div><div class="ts" id="ts3">00:00:00</div></div>
        <div class="screen"><img src="/assets/webcam.gif?v=1.20.1" alt="webcam feed placeholder"></div>
      </div>
    `
  },
  visuals: {
    leftTitle: "Visuals",
    leftHTML: `
      <p>Old-Hollywood theatre meets digital glitch. Lip-gloss chrome, velvet curtains, neon edges.</p>
      <ul>
        <li>‚ÄúPerformance‚Äù ‚Äî red-curtain cover</li>
        <li>‚ÄúFlip Phone‚Äù ‚Äî voicemail intro screens</li>
        <li>Sticker sheet ‚Äî glitter hearts & secrets</li>
      </ul>
      <hr /><p>Gallery coming soon ‚Äî header elements hide Easter-egg links.</p>
    `,
    rightEnabled: true,
    rightHTML: `
      <h2>Moodboard</h2>
      <ul style="margin:0 0 10px 18px; padding:0;">
        <li>Velvet theatre + chrome gloss</li>
        <li>Pink glitter + neon blue edge</li>
        <li>2007‚Äì2009 pop futurism</li>
      </ul>
      <hr />
      <h2>Quick Links</h2>
      <div class="badges">
        <a href="#music">Music</a><a href="#journal">Journal</a><a href="#contact">Contact</a>
      </div>
      <div class="webcam">
        <div class="bar"><div class="rec"><span class="dot"></span> REC</div><div class="ts" id="ts4">00:00:00</div></div>
        <div class="screen"><img src="/assets/webcam.gif?v=1.20.1" alt="webcam feed placeholder"></div>
      </div>
    `
  },
  journal: {
    leftTitle: "Journal",
    leftHTML: `
      <p>Web diary: raw notes, studio days, sparkly chaos.</p>
      <article>
        <h3>Nov 3, 2025 ‚Äî Secrets!</h3>
        <p>Left heart now opens a Pong mini-game. Right heart reserved for future teasers.</p>
      </article>
    `,
    rightEnabled: false
  },
  about: {
    leftTitle: "About",
    leftHTML: `
      <p>I‚Äôm <strong>bj case</strong> ‚Äî a loud, glossy heart with a moody core. Music that feels like midnight chrome.</p>
      <p>Influences: Britney <em>Blackout/Circus</em>, Bloodshy & Avant, Danja, 2007‚Äì2009 futurism.</p>
    `,
    rightEnabled: false
  },
  contact: {
    leftTitle: "Contact",
    leftHTML: `
      <p>Say hi ‚Äî bookings, collabs, or glitter talk.</p>
      <p><strong>Email:</strong> <a href="mailto:hello@bjcase.com">hello@bjcase.com</a></p>
      <p><strong>Guestbook:</strong> hop into the Journal and drop a note.</p>
    `,
    rightEnabled: false
  }
};

const rootEl = document.getElementById("pageRoot");
const leftPane = document.getElementById("leftPane");
const rightPane = document.getElementById("rightPane");

/* ===== Layout helpers ===== */
function setLayout(single){
  if(single){ rootEl.classList.add("single"); }
  else{ rootEl.classList.remove("single"); }
}
function syncColumns(){
  const rightVisible = rightPane.style.display !== "none";
  if(!rightVisible){ leftPane.style.minHeight=""; return; }
  const L = leftPane.offsetHeight;
  const R = rightPane.offsetHeight;
  const H = Math.max(L,R);
  leftPane.style.minHeight = H + "px";
  rightPane.style.minHeight = H + "px";
}
let syncRAF;
function scheduleSync(){ cancelAnimationFrame(syncRAF); syncRAF = requestAnimationFrame(syncColumns); }

/* ===== Right column mount + home poll hookup ===== */
function mountRight(html){
  if(!html){ rightPane.style.display="none"; setLayout(true); scheduleSync(); return; }
  rightPane.style.display=""; setLayout(false);
  rightPane.innerHTML = html;

  const btn = rightPane.querySelector('#voteBtnHome');
  if(btn){
    wirePoll('#voteBtnHome','#pollResultsHome','#pPerfHome','#pFlipHome','#pLookHome',
             '#bPerfHome','#bFlipHome','#bLookHome','bj_poll_home');
  }

  rightPane.querySelectorAll('img').forEach(img=>{
    if(img.complete) scheduleSync();
    else img.addEventListener('load', scheduleSync, {once:true});
  });
  scheduleSync();
}

/* ===== Router ===== */
function render(route){
  const key = route && pages[route] ? route : "home";
  document.getElementById("leftTitle").textContent = pages[key].leftTitle;
  document.getElementById("leftContent").innerHTML = pages[key].leftHTML;
  mountRight(pages[key].rightEnabled ? pages[key].rightHTML : null);

  if(key === 'heartL'){ bootPong(); }
}
function onHash(){ render(location.hash.replace("#","").toLowerCase()); }
window.addEventListener("hashchange", onHash);
onHash();

/* Resync on window resize */
window.addEventListener('resize', scheduleSync);

/* Clicking logo returns Home */
document.getElementById('logo').addEventListener('click', ()=> location.hash = '#home');

/* ===== POLL (localStorage) + mini confetti ===== */
function wirePoll(btnSel,resSel,pPerfSel,pFlipSel,pLookSel,bPerfSel,bFlipSel,bLookSel,KEY){
  const els = {
    btn: document.querySelector(btnSel),
    results: document.querySelector(resSel),
    pPerf: document.querySelector(pPerfSel),
    pFlip: document.querySelector(pFlipSel),
    pLook: document.querySelector(pLookSel),
    bPerf: document.querySelector(bPerfSel),
    bFlip: document.querySelector(bFlipSel),
    bLook: document.querySelector(bLookSel)
  };
  if(!els.btn) return;

  function read(){ try{ return JSON.parse(localStorage.getItem(KEY))||{performance:0,flip:0,look:0}; }catch(e){ return {performance:0,flip:0,look:0}; } }
  function save(d){ localStorage.setItem(KEY, JSON.stringify(d)); }
  function per(v,t){ return Math.round((v||0)/(t||1)*100); }
  function draw(d){
    const t=(d.performance||0)+(d.flip||0)+(d.look||0)||1;
    els.pPerf.textContent=per(d.performance,t)+"%";
    els.pFlip.textContent=per(d.flip,t)+"%";
    els.pLook.textContent=per(d.look,t)+"%";
    els.bPerf.style.width=per(d.performance,t)+"%";
    els.bFlip.style.width=per(d.flip,t)+"%";
    els.bLook.style.width=per(d.look,t)+"%";
    els.results.style.display='block';
  }

  function confettiBurst(x,y){
    for(let i=0;i<10;i++){
      const s=document.createElement('span');
      s.className='cursor-star';
      s.style.left=(x+(Math.random()*34-17))+'px';
      s.style.top=(y+(Math.random()*16-8))+'px';
      const colors=["#ff9ef6","#49c9ff","#ffb35e","#ff4d4d","#ffffff"];
      const c=colors[(Math.random()*colors.length)|0];
      s.style.color=c;
      s.style.background=`radial-gradient(circle, ${c} 0%, transparent 70%)`;
      s.style.animationDuration=(280+Math.random()*280)+'ms';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(), 430);
    }
  }

  els.btn.addEventListener('click',(ev)=>{
    const chosen = document.querySelector('input[name="poll"]:checked'); if(!chosen) return;
    const voted = localStorage.getItem(KEY+"_voted"); const data=read();
    if(voted){ draw(data); confettiBurst(ev.clientX+window.scrollX, ev.clientY+window.scrollY); return; }
    if(chosen.value==="performance") data.performance++;
    if(chosen.value==="flip") data.flip++;
    if(chosen.value==="look") data.look++;
    save(data); localStorage.setItem(KEY+"_voted","1"); draw(data);
    confettiBurst(ev.clientX+window.scrollX, ev.clientY+window.scrollY);
  });

  if(localStorage.getItem(KEY+"_voted")) draw(read());
}
wirePoll('#voteBtn','#pollResults','#pPerf','#pFlip','#pLook','#bPerf','#bFlip','#bLook','bj_poll_right');

/* ===== Shoutbox (private posts) ===== */
(() => {
  const SB_KEY="bj_shout_private";
  const chat = document.getElementById('chat');
  const nameInput = document.getElementById('nameInput');
  const msgInput = document.getElementById('msgInput');
  const sendBtn  = document.getElementById('sendBtn');
  const privTgl  = document.getElementById('privateToggle');
  const clearBtn = document.getElementById('clearLocal');

  function load(){ try{ return JSON.parse(localStorage.getItem(SB_KEY))||[] }catch(e){ return [] } }
  function save(arr){ localStorage.setItem(SB_KEY, JSON.stringify(arr)) }

  function renderPrivate(){
    chat.querySelectorAll('.bubble.private').forEach(n=>n.remove());
    if(!privTgl.checked) return;
    const arr = load();
    arr.forEach(s=>{
      const div = document.createElement('div');
      div.className = 'bubble private me';
      div.innerHTML = `<strong>${s.name||'me'}:</strong> ${s.text}<div class="meta">${s.time}</div>`;
      chat.appendChild(div);
    });
    chat.scrollTop = chat.scrollHeight;
  }

  document.querySelectorAll('#emotes button').forEach(b=>{
    b.addEventListener('click',()=>{ msgInput.value += (msgInput.value ? ' ' : '') + b.textContent; msgInput.focus(); });
  });

  sendBtn.addEventListener('click', ()=>{
    const text = msgInput.value.trim(); if(!text) return;
    const name = (nameInput.value.trim() || 'me');
    const time = new Date().toLocaleString();
    const arr = load(); arr.push({name, text, time}); save(arr);
    msgInput.value='';
    renderPrivate();
  });

  privTgl.addEventListener('change', renderPrivate);
  clearBtn.addEventListener('click', ()=>{ localStorage.removeItem(SB_KEY); renderPrivate(); });

  renderPrivate();
})();

/* ===== Multicolor cursor glitter ===== */
(()=> {
  const colors = ["#ff9ef6","#49c9ff","#ffb35e","#ff4d4d","#ffffff"];
  let lastT = 0;
  document.addEventListener("mousemove", (e)=>{
    const now = performance.now();
    if (now - lastT < 12) return;
    lastT = now;
    const star = document.createElement("span");
    star.className = "cursor-star";
    star.style.left = (window.scrollX + e.clientX - 3) + "px";
    star.style.top  = (window.scrollY + e.clientY - 3) + "px";
    const c = colors[(Math.random()*colors.length)|0];
    star.style.color = c;
    star.style.background = `radial-gradient(circle, ${c} 0%, transparent 70%)`;
    document.body.appendChild(star);
    setTimeout(()=>{ star.remove(); }, 550);
  }, {passive:true});
})();

/* ===== REC timers ===== */
(function recTimers(){
  const update = (id)=> {
    const el = document.getElementById(id);
    if(!el) return;
    const t = new Date();
    const h = String(t.getHours()).padStart(2,'0');
    const m = String(t.getMinutes()).padStart(2,'0');
    const s = String(t.getSeconds()).padStart(2,'0');
    el.textContent = `${h}:${m}:${s}`;
  };
  setInterval(()=>{ ['ts','ts2','ts3','ts4'].forEach(update); }, 1000);
})();

/* ======== PONG MINI-GAME (heartL) ======== */
function bootPong(){
  const canvas = document.getElementById('pong');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;

  let up=false, down=false, paused=false;
  let player = { x: 16, y: H/2-35, w: 10, h: 70, s: 5 };
  let cpu    = { x: W-26, y: H/2-35, w: 10, h: 70, s: 4.2 };
  let ball   = { x: W/2, y: H/2, r: 6, vx: 3.8*(Math.random()<.5?1:-1), vy: 2.6*(Math.random()<.5?1:-1) };
  let score  = { p:0, c:0 };

  function resetBall(dir=1){
    ball.x=W/2; ball.y=H/2;
    ball.vx = 3.6*dir; ball.vy = (Math.random()>0.5?2.4:-2.4);
  }

  function clamp(v,min,max){ return v<min?min:(v>max?max:v); }

  function draw(){
    // bg
    const g=ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,'#140018'); g.addColorStop(1,'#0b0010');
    ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

    // center line
    ctx.setLineDash([8,8]); ctx.strokeStyle='rgba(255,255,255,.2)';
    ctx.beginPath(); ctx.moveTo(W/2,0); ctx.lineTo(W/2,H); ctx.stroke();
    ctx.setLineDash([]);

    // paddles
    ctx.fillStyle='#ff9ef6'; ctx.fillRect(player.x, player.y, player.w, player.h);
    ctx.fillStyle='#49c9ff'; ctx.fillRect(cpu.x, cpu.y, cpu.w, cpu.h);

    // ball
    ctx.beginPath(); ctx.fillStyle='#fff';
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2); ctx.fill();

    // score
    ctx.font='bold 18px Verdana'; ctx.fillStyle='#ffbdfb';
    ctx.fillText(score.p, W/2-40, 26);
    ctx.fillStyle='#9fdfff'; ctx.fillText(score.c, W/2+28, 26);

    if(paused){
      ctx.fillStyle='rgba(0,0,0,.45)'; ctx.fillRect(0,0,W,H);
      ctx.fillStyle='#ffdfff'; ctx.font='bold 20px Verdana'; ctx.fillText('PAUSED', W/2-38, H/2);
    }
  }

  function step(){
    if(paused) return draw();

    // player movement
    if(up) player.y -= player.s;
    if(down) player.y += player.s;
    player.y = clamp(player.y, 0, H-player.h);

    // cpu AI
    const target = ball.y - cpu.h/2;
    cpu.y += (target - cpu.y) * 0.08;
    cpu.y = clamp(cpu.y, 0, H-cpu.h);

    // ball
    ball.x += ball.vx; ball.y += ball.vy;
    if(ball.y-ball.r<0 || ball.y+ball.r>H){ ball.vy*=-1; }

    // collide paddles
    function collide(p){
      if(ball.x+ball.r>p.x && ball.x-ball.r<p.x+p.w && ball.y>p.y && ball.y<p.y+p.h){
        ball.vx *= -1.06;
        const rel = (ball.y - (p.y+p.h/2)) / (p.h/2);
        ball.vy = rel*3.2;
      }
    }
    collide(player); collide(cpu);

    // score
    if(ball.x < 0){ score.c++; resetBall(1); }
    if(ball.x > W){ score.p++; resetBall(-1); }

    if(score.p>=5 || score.c>=5){
      paused = true;
      setTimeout(()=>{ score.p=0; score.c=0; paused=false; resetBall(score.c>score.p?-1:1); }, 1200);
    }

    draw();
    requestAnimationFrame(step);
  }

  // controls
  window.onkeydown = (e)=>{
    if(e.key==='ArrowUp') up=true;
    if(e.key==='ArrowDown') down=true;
    if(e.key.toLowerCase()==='r'){ score.p=0; score.c=0; resetBall((Math.random()<.5)?1:-1); }
    if(e.key.toLowerCase()==='p'){ paused=!paused; }
  };
  window.onkeyup = (e)=>{
    if(e.key==='ArrowUp') up=false;
    if(e.key==='ArrowDown') down=false;
  };

  draw(); requestAnimationFrame(step);
}

/* ===== Mount the static (right column) poll too ===== */
wirePoll('#voteBtn','#pollResults','#pPerf','#pFlip','#pLook','#bPerf','#bFlip','#bLook','bj_poll_right');
</script>
</body>
</html>